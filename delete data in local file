#include <stdio.h>
#include <string.h>
#include <stdbool.h>

// Structure based on data fields in sources [3-6]
typedef struct {
    char date;
    char name;
    long id;
    char hazardous;
    float absolute_magnitude;
    float diameter_min;
    float diameter_max;
    double miss_distance;
    double velocity;
} Asteroid;

// Function to handle the "Delete Data" logic [1]
void deleteRecord(Asteroid list[], int *count) {
    char targetName;
    char targetDate;
    bool found = false;

    // 1. Request asteroid name and date of finding [1], [2]
    printf("\n--- DELETE DATA ---\n");
    printf("Request asteroid name: ");
    scanf(" %[^\n]s", targetName); 
    printf("Request date of the finding (YYYY-MM-DD): ");
    scanf(" %[^\n]s", targetDate);

    // 2. Search for the name in the data [1]
    for (int i = 0; i < *count; i++) {
        if (strcmp(list[i].name, targetName) == 0 && strcmp(list[i].date, targetDate) == 0) {
            found = true;

            // 3. Remove asteroid from data by shifting elements [1]
            for (int j = i; j < *count - 1; j++) {
                list[j] = list[j + 1];
            }
            (*count)--;

            // 4. Confirm removal [1], [2]
            printf("\nThank you! This asteroid was successful removed from our database!\n");
            break;
        }
    }

    // 5. If No Name found, display error message [1]
    if (!found) {
        printf("\nError: Asteroid name or date not found in the system.\n");
    }
}

int main() {
    // Loading sample data from the sources into memory [1], [3], [4]
    Asteroid database = {
        {"2025-12-05", "(2025 XJ)", 54565832, "True", 21.72, 120.38, 269.17, 6736578.12, 30.34},
        {"2025-12-15", "(2025 WA3)", 54563249, "True", 20.753, 187.91, 420.18, 3405160.76, 19.41},
        {"2025-12-10", "(1983 LC)", 3005806, "True", 19.45, 342.41, 765.66, 73954182.27, 32.95}
    };
    int recordCount = 3;

    // Simulation of the Menu loop [1]
    int choice;
    do {
        printf("\nASTEROID SYSTEM MENU\n1. View Data\n2. Add New Data\n3. Edit Data\n4. Delete Data\n0. Save & Exit\nChoice: ");
        scanf("%d", &choice);

        if (choice == 4) {
            deleteRecord(database, &recordCount);
        } else if (choice == 0) {
            printf("Saving data to file... End.\n"); // Source [1], [6]
        }
    } while (choice != 0);

    return 0;
}
